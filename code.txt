//Admin/dashboard/blog/page.tsx
"use client";

import Image from 'next/image';

import { useState, useEffect } from "react";
import Link from "next/link";
import { toast } from "sonner";
import { format } from "date-fns";
import {
  sanityClient,
  BLOG_POSTS_ADMIN_QUERY,
  deleteBlogPost,
  publishBlogPost,
  unpublishBlogPost,
  duplicateBlogPost,
} from "@/src/sanity/lib/sanity";
import type { BlogPost } from "@/types/types";
import {StatusBadge} from "@/src/components/admin/shared/StatusBadge";
import ConfirmDialog from "@/src/components/admin/shared/ConfirmDialog";
import {
  Plus,
  Search,
  RefreshCw,
  Eye,
  Edit2,
  Trash2,
  Copy,
  Globe,
  EyeOff,
  FileText,
  ChevronDown,

} from "lucide-react";
import { urlFor } from "@/src/sanity/lib/sanity";

export default function BlogPage() {
  const [posts, setPosts] = useState<BlogPost[]>([]);
  const [filtered, setFiltered] = useState<BlogPost[]>([]);
  const [loading, setLoading] = useState(true);
  const [search, setSearch] = useState("");
  const [statusFilter, setStatusFilter] = useState<string>("all");
  const [deletePost, setDeletePost] = useState<BlogPost | null>(null);
  const [actionLoading, setActionLoading] = useState<string | null>(null);

  async function fetchPosts() {
    setLoading(true);
    try {
      const data = await sanityClient.fetch(BLOG_POSTS_ADMIN_QUERY);
      setPosts(data);
    } catch {
      toast.error("Failed to load blog posts");
    } finally {
      setLoading(false);
    }
  }

  useEffect(() => {
    fetchPosts();
  }, []);

  useEffect(() => {
    let result = posts;
    if (search) {
      const q = search.toLowerCase();
      result = result.filter(
        (p) =>
          p.title?.toLowerCase().includes(q) ||
          p.author?.name?.toLowerCase().includes(q),
      );
    }
    if (statusFilter !== "all") {
      result = result.filter((p) => p.status === statusFilter);
    }
    setFiltered(result);
  }, [posts, search, statusFilter]);

  async function handleDelete() {
    if (!deletePost) return;
    setActionLoading(deletePost._id);
    try {
      await deleteBlogPost(deletePost._id);
      toast.success("Post deleted");
      setPosts(posts.filter((p) => p._id !== deletePost._id));
    } catch {
      toast.error("Failed to delete post");
    } finally {
      setActionLoading(null);
      setDeletePost(null);
    }
  }

  async function handlePublishToggle(post: BlogPost) {
    setActionLoading(post._id);
    try {
      if (post.status === "published") {
        await unpublishBlogPost(post._id);
        toast.success("Post unpublished");
      } else {
        await publishBlogPost(post._id);
        toast.success("Post published");
      }
      fetchPosts();
    } catch {
      toast.error("Failed to update post status");
    } finally {
      setActionLoading(null);
    }
  }

  async function handleDuplicate(post: BlogPost) {
    setActionLoading(post._id);
    try {
      await duplicateBlogPost(post._id);
      toast.success("Post duplicated as draft");
      fetchPosts();
    } catch {
      toast.error("Failed to duplicate post");
    } finally {
      setActionLoading(null);
    }
  }

  const statusCounts = {
    all: posts.length,
    published: posts.filter((p) => p.status === "published").length,
    draft: posts.filter((p) => p.status === "draft").length,
    scheduled: posts.filter((p) => p.status === "scheduled").length,
  };

  return (
    <div className="space-y-6">
      {/* Header */}
      <div className="page-header">
        <div>
          <h1 className="page-title">Blog</h1>
          <p className="page-subtitle">{posts.length} posts total</p>
        </div>
        <div className="flex items-center gap-2">
          <button
            onClick={fetchPosts}
            className="btn-ghost p-2"
            title="Refresh"
          >
            <RefreshCw className={`w-4 h-4 ${loading ? "animate-spin" : ""}`} />
          </button>
          <Link href="/admin/dashboard/blog/new" className="btn-primary">
            <Plus className="w-4 h-4" />
            New Post
          </Link>
        </div>
      </div>

      {/* Status Tabs */}
      <div className="flex gap-2 flex-wrap">
        {Object.entries(statusCounts).map(([status, count]) => (
          <button
            key={status}
            onClick={() => setStatusFilter(status)}
            className={`px-3 py-1.5 rounded-lg text-sm font-medium transition-all ${
              statusFilter === status ? "btn-primary" : "btn-secondary"
            }`}
          >
            {status.charAt(0).toUpperCase() + status.slice(1)} ({count})
          </button>
        ))}
      </div>

      {/* Search */}
      <div className="card p-4">
        <div className="relative max-w-sm">
          <Search
            className="absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4"
            style={{ color: "var(--text-faint)" }}
          />
          <input
            className="input pl-9"
            placeholder="Search posts..."
            value={search}
            onChange={(e) => setSearch(e.target.value)}
          />
        </div>
      </div>

      {/* Posts Grid / List */}
      {loading ? (
        <div className="grid gap-4 sm:grid-cols-2 xl:grid-cols-3">
          {Array.from({ length: 6 }).map((_, i) => (
            <div
              key={i}
              className="card h-48 animate-pulse"
              style={{ background: "rgba(255,255,255,0.02)" }}
            />
          ))}
        </div>
      ) : filtered.length === 0 ? (
        <div className="card flex flex-col items-center justify-center py-16">
          <FileText
            className="w-12 h-12 mb-4"
            style={{ color: "var(--text-faint)" }}
          />
          <p className="text-sm" style={{ color: "var(--text-faint)" }}>
            {search ? "No posts match your search" : "No posts yet"}
          </p>
          {!search && (
            <Link href="/dashboard/blog/new" className="btn-primary mt-4">
              <Plus className="w-4 h-4" /> Create First Post
            </Link>
          )}
        </div>
      ) : (
        <div className="card overflow-hidden">
          <table className="data-table">
            <thead>
              <tr>
                <th>Post</th>
                <th>Status</th>
                <th>Author</th>
                <th>Categories</th>
                <th>Published</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody>
              {filtered.map((post) => (
                <tr key={post._id}>
                  <td>
                    <div className="flex items-center gap-3">
                      {post.featuredImage ? (
                        <div className="w-10 h-10 rounded-lg overflow-hidden flex-shrink-0">
                          <Image
                            src={urlFor(post.featuredImage)
                              .width(80)
                              .height(80)
                              .url()}
                            alt={post.title}
                            width={80}
                            height={80}
                            className="w-full h-full object-cover"
                          />
                        </div>
                      ) : (
                        <div
                          className="w-10 h-10 rounded-lg flex items-center justify-center flex-shrink-0"
                          style={{ background: "rgba(139,31,168,0.1)" }}
                        >
                          {/* <Image
                            className="w-4 h-4"
                            style={{ color: "var(--text-faint)" }}
                          /> */}
                        </div>
                      )}
                      <div className="min-w-0">
                        <p
                          className="font-medium text-sm truncate max-w-xs"
                          style={{ color: "var(--text)" }}
                        >
                          {post.title}
                        </p>
                        <p
                          className="text-xs truncate"
                          style={{ color: "var(--text-faint)" }}
                        >
                          /{post.slug?.current}
                        </p>
                      </div>
                    </div>
                  </td>
                  <td>
                    <StatusBadge status={post.status} />
                  </td>
                  <td>
                    <span className="text-xs">{post.author?.name ?? "â€”"}</span>
                  </td>
                  <td>
                    <div className="flex flex-wrap gap-1">
                      {post.categories?.slice(0, 2).map((cat) => (
                        <span
                          key={cat._id}
                          className="badge badge-draft text-xs"
                          style={{ padding: "2px 6px" }}
                        >
                          {cat.title}
                        </span>
                      ))}
                      {(post.categories?.length ?? 0) > 2 && (
                        <span
                          className="text-xs"
                          style={{ color: "var(--text-faint)" }}
                        >
                          +{(post.categories?.length ?? 0) - 2}
                        </span>
                      )}
                    </div>
                  </td>
                  <td>
                    <span className="text-xs">
                      {post.publishedAt
                        ? format(new Date(post.publishedAt), "MMM d, yyyy")
                        : "â€”"}
                    </span>
                  </td>
                  <td>
                    <div className="flex items-center gap-1">
                      <Link
                        href={`/dashboard/blog/${post._id}`}
                        className="btn-ghost p-1.5"
                        title="Edit"
                      >
                        <Edit2 className="w-3.5 h-3.5" />
                      </Link>
                      <button
                        onClick={() => handlePublishToggle(post)}
                        disabled={actionLoading === post._id}
                        className="btn-ghost p-1.5"
                        title={
                          post.status === "published" ? "Unpublish" : "Publish"
                        }
                        style={{
                          color:
                            post.status === "published" ? "#FFC107" : "#28A745",
                        }}
                      >
                        {post.status === "published" ? (
                          <EyeOff className="w-3.5 h-3.5" />
                        ) : (
                          <Globe className="w-3.5 h-3.5" />
                        )}
                      </button>
                      <button
                        onClick={() => handleDuplicate(post)}
                        disabled={actionLoading === post._id}
                        className="btn-ghost p-1.5"
                        title="Duplicate"
                      >
                        <Copy className="w-3.5 h-3.5" />
                      </button>
                      <button
                        onClick={() => setDeletePost(post)}
                        className="btn-ghost p-1.5"
                        title="Delete"
                        style={{ color: "#DC3545" }}
                      >
                        <Trash2 className="w-3.5 h-3.5" />
                      </button>
                    </div>
                  </td>
                </tr>
              ))}
            </tbody>
          </table>
        </div>
      )}

      <ConfirmDialog
        open={!!deletePost}
        title="Delete Post"
        description={`Permanently delete "${deletePost?.title}"? This cannot be undone.`}
        confirmLabel="Delete"
        variant="destructive"
        onConfirm={handleDelete}
        onCancel={() => setDeletePost(null)}
      />
    </div>
  );
}

/admin/dashboard/blog/new/page.tsx
"use client"
import { useState, useEffect } from 'react'
import { useRouter } from 'next/navigation'
import { toast } from 'sonner'
import { sanityClient, CATEGORIES_QUERY, AUTHORS_QUERY } from '@/src/sanity/lib/sanity'
import { type SanityCategory, type SanityAuthor, type PostFormData, slugify } from '@/types/types'
import BlogPostEditor from '@/src/components/admin/blog/BlogPostEditor'


export default function NewBlogPostPage(){
     const router = useRouter()
  const [categories, setCategories] = useState<SanityCategory[]>([])
  const [authors, setAuthors]       = useState<SanityAuthor[]>([])
  const [loading, setLoading]   = useState(true)

  useEffect(() => {
    async function load(){
        try{
            const [cats, auths] = await Promise.all([
                 sanityClient.fetch(CATEGORIES_QUERY),
          sanityClient.fetch(AUTHORS_QUERY),
            ])
            setCategories(cats)
        setAuthors(auths)
        } catch{
            toast.error("Failed to load categories/authors")
        }finally{
            setLoading(false)
        }
    }

    load()
  }, [])

  async function handleSave(data: PostFormData, publish: boolean) {
    const slug = data.slug || slugify(data.title)

    const doc: Record<string, unknown> = {
      _type: 'blogPost',
      title: data.title,
      slug: { _type: 'slug', current: slug },
      excerpt: data.excerpt || undefined,
      tags: data.tags,
      metaTitle: data.metaTitle || undefined,
      metaDescription: data.metaDescription || undefined,
      author: data.authorId
        ? { _type: 'reference', _ref: data.authorId }
        : undefined,
      categories: data.categoryIds.map(id => ({ _type: 'reference', _ref: id })),
      publishedAt: publish ? new Date().toISOString() : undefined,
    }

    const created = await sanityClient.create(doc)
    toast.success(publish ? 'Post published!' : 'Draft saved!')
    router.push(`/dashboard/blog/${created._id}`)
  }

  return (
    <BlogPostEditor
      mode="create"
      categories={categories}
      authors={authors}
      loadingMeta={loading}
      onSave={handleSave}
    />
  )
}



//admin/dashboard/blog/[id]/page.tsx

'use client'

import { useState, useEffect } from 'react'
import { useRouter, useParams } from 'next/navigation'
import { toast } from 'sonner'
import { sanityClient, BLOG_POST_BY_ID_QUERY, CATEGORIES_QUERY, AUTHORS_QUERY } from '@/src/sanity/lib/sanity'
import type { BlogPost, SanityCategory, SanityAuthor } from '@/types/types'
import BlogPostEditor from '@/src/components/admin/blog/BlogPostEditor'
import type { PostFormData } from '@/types/types'

export default function EditBlogPostPage() {
  const params = useParams()
  const router = useRouter()
  const id     = params.id as string

  const [post, setPost]           = useState<BlogPost | null>(null)
  const [categories, setCategories] = useState<SanityCategory[]>([])
  const [authors, setAuthors]       = useState<SanityAuthor[]>([])
  const [loading, setLoading]       = useState(true)

  useEffect(() => {
    async function load() {
      try {
        const [p, cats, auths] = await Promise.all([
          sanityClient.fetch(BLOG_POST_BY_ID_QUERY, { id }),
          sanityClient.fetch(CATEGORIES_QUERY),
          sanityClient.fetch(AUTHORS_QUERY),
        ])
        if (!p) { toast.error('Post not found'); router.push('/dashboard/blog'); return }
        setPost(p)
        setCategories(cats)
        setAuthors(auths)
      } catch {
        toast.error('Failed to load post')
      } finally {
        setLoading(false)
      }
    }
    load()
  }, [id])

  async function handleSave(data: PostFormData, publish: boolean) {
    const updates: Record<string, unknown> = {
      title: data.title,
      slug: { _type: 'slug', current: data.slug },
      excerpt: data.excerpt || undefined,
      tags: data.tags,
      metaTitle: data.metaTitle || undefined,
      metaDescription: data.metaDescription || undefined,
      author: data.authorId
        ? { _type: 'reference', _ref: data.authorId }
        : undefined,
      categories: data.categoryIds.map(rid => ({ _type: 'reference', _ref: rid })),
    }

    // Only set publishedAt if publishing and not already published
    if (publish && !post?.publishedAt) {
      updates.publishedAt = new Date().toISOString()
    }
    // Allow unpublishing (explicit null)
    if (!publish && post?.publishedAt) {
      await sanityClient.patch(id).unset(['publishedAt']).commit()
    }

    await sanityClient.patch(id).set(updates).commit()
    toast.success(publish ? 'Post published!' : 'Draft saved!')
    router.refresh()
  }

  if (loading) {
    return (
      <div className="space-y-4 max-w-4xl animate-pulse">
        <div className="h-8 rounded-lg w-48 bg-white/5" />
        <div className="card h-96 bg-white/[0.02]" />
      </div>
    )
  }

  if (!post) return null

  return (
    <BlogPostEditor
      mode="edit"
      post={post}
      categories={categories}
      authors={authors}
      loadingMeta={false}
      onSave={handleSave}
    />
  )
}

//Admin/dashboard/blog-action.ts

"use server";

import { createServerSupabaseClient } from "@/src/lib/supabase/server";
import type { DashboardStats, ActivityItem, ActionResult } from "@/types/admin";

// â”€â”€ Dashboard stats â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

export async function getDashboardStats(): Promise<ActionResult<DashboardStats>> {
  const supabase = await createServerSupabaseClient();
  const { data: { user } } = await supabase.auth.getUser();
  if (!user) return { success: false, error: "Unauthorised" };

  const now      = new Date();
  const monthStart = new Date(now.getFullYear(), now.getMonth(), 1).toISOString();

  // Run all counts in parallel
  const [
    bookingsAll,
    bookingsMonth,
    bookingsPending,
    bookingsConfirmed,
    quotesAll,
    quotesAccepted,
    posts,
    messages,
  ] = await Promise.all([
    supabase.from("bookings").select("id", { count: "exact", head: true }),
    supabase.from("bookings").select("id", { count: "exact", head: true }).gte("created_at", monthStart),
    supabase.from("bookings").select("id", { count: "exact", head: true }).eq("status", "pending"),
    supabase.from("bookings").select("id", { count: "exact", head: true }).eq("status", "confirmed"),
    supabase.from("quotes").select("id", { count: "exact", head: true }),
    supabase.from("quotes").select("id", { count: "exact", head: true }).eq("status", "accepted"),
    supabase.from("blog_posts").select("id", { count: "exact", head: true }).eq("status", "published"),
    supabase.from("contact_messages").select("id", { count: "exact", head: true }).eq("status", "unread"),
  ]);

  // Accepted quotes value
  const { data: acceptedQuotes } = await supabase
    .from("quotes")
    .select("total")
    .eq("status", "accepted");

  const total_quote_value = (acceptedQuotes ?? []).reduce(
    (sum: number, q: { total: number }) => sum + (q.total ?? 0),
    0
  );

  const stats: DashboardStats = {
    total_bookings:      bookingsAll.count        ?? 0,
    bookings_this_month: bookingsMonth.count      ?? 0,
    pending_bookings:    bookingsPending.count     ?? 0,
    confirmed_bookings:  bookingsConfirmed.count  ?? 0,
    total_quotes:        quotesAll.count          ?? 0,
    accepted_quotes:     quotesAccepted.count     ?? 0,
    total_quote_value,
    published_posts:     posts.count              ?? 0,
    unread_messages:     messages.count           ?? 0,
  };

  return { success: true, data: stats };
}

// â”€â”€ Activity feed â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// Combines recent rows from bookings, quotes, messages, blog into a
// single chronological timeline (most recent 20 events).

export async function getActivityFeed(): Promise<ActionResult<ActivityItem[]>> {
  const supabase = await createServerSupabaseClient();
  const { data: { user } } = await supabase.auth.getUser();
  if (!user) return { success: false, error: "Unauthorised" };

  const [bookings, quotes, messages, posts] = await Promise.all([
    supabase
      .from("bookings")
      .select("id, reference, client_name, event_name, status, created_at")
      .order("created_at", { ascending: false })
      .limit(6),
    supabase
      .from("quotes")
      .select("id, quote_number, client_name, status, created_at")
      .order("created_at", { ascending: false })
      .limit(6),
    supabase
      .from("contact_messages")
      .select("id, reference, full_name, subject, status, created_at")
      .order("created_at", { ascending: false })
      .limit(5),
    supabase
      .from("blog_posts")
      .select("id, title, status, created_at")
      .order("created_at", { ascending: false })
      .limit(3),
  ]);

  const items: ActivityItem[] = [
    ...(bookings.data ?? []).map((b) => ({
      id:         `booking-${b.id}`,
      type:       "booking" as const,
      action:     b.status === "pending" ? "New booking request" : `Booking ${b.status}`,
      subject:    `${b.client_name} â€” ${b.event_name}`,
      status:     b.status,
      created_at: b.created_at,
    })),
    ...(quotes.data ?? []).map((q) => ({
      id:         `quote-${q.id}`,
      type:       "quote" as const,
      action:     q.status === "draft" ? "Quote created" : `Quote ${q.status}`,
      subject:    `${q.quote_number} â€” ${q.client_name}`,
      status:     q.status,
      created_at: q.created_at,
    })),
    ...(messages.data ?? []).map((m) => ({
      id:         `message-${m.id}`,
      type:       "message" as const,
      action:     "New contact message",
      subject:    `${m.full_name} â€” ${m.subject}`,
      status:     m.status,
      created_at: m.created_at,
    })),
    ...(posts.data ?? []).map((p) => ({
      id:         `blog-${p.id}`,
      type:       "blog" as const,
      action:     p.status === "published" ? "Post published" : "Post created",
      subject:    p.title,
      status:     p.status,
      created_at: p.created_at,
    })),
  ]
    .sort((a, b) => new Date(b.created_at).getTime() - new Date(a.created_at).getTime())
    .slice(0, 20);

  return { success: true, data: items };
}

// â”€â”€ Recent bookings (for dashboard widget) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

export async function getRecentBookings() {
  const supabase = await createServerSupabaseClient();
  const { data: { user } } = await supabase.auth.getUser();
  if (!user) return { success: false, error: "Unauthorised" as string, data: undefined };

  const { data, error } = await supabase
    .from("bookings")
    .select("id, reference, client_name, event_name, event_date, services, status, created_at")
    .order("created_at", { ascending: false })
    .limit(5);

  if (error) return { success: false, error: error.message, data: undefined };
  return { success: true, data };
}

// â”€â”€ Recent quotes (for dashboard widget) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

export async function getRecentQuotes() {
  const supabase = await createServerSupabaseClient();
  const { data: { user } } = await supabase.auth.getUser();
  if (!user) return { success: false, error: "Unauthorised" as string, data: undefined };

  const { data, error } = await supabase
    .from("quotes")
    .select("id, quote_number, client_name, client_company, total, status, created_at")
    .order("created_at", { ascending: false })
    .limit(5);

  if (error) return { success: false, error: error.message, data: undefined };
  return { success: true, data };
}

//components/admin/blog/BlogPOstEditor

"use client";

import { useState, useTransition } from "react";
import Link from "next/link";
import { toast } from "sonner";
import type {
  BlogPost,
  SanityCategory,
  SanityAuthor,
  PostFormData,
} from "@/types/types";
import { getBlogStatus, slugify } from "@/types/types";

import {
  ArrowLeft,
  Save,
  Globe,
  Eye,
  EyeOff,
  Loader2,
  Plus,
  X,
  Hash,
  ChevronDown,
} from "lucide-react";

interface Props {
  mode: "create" | "edit";
  post?: BlogPost;
  categories: SanityCategory[];
  authors: SanityAuthor[];
  loadingMeta: boolean;
  onSave: (data: PostFormData, publish: boolean) => Promise<void>;
}

export default function BlogPostEditor({
  mode,
  post,
  categories,
  authors,
  loadingMeta,
  onSave,
}: Props) {
  const [isPending, startTransition] = useTransition();
  const [saveType, setSaveType] = useState<"draft" | "publish" | null>(null);
  const [tagInput, setTagInput] = useState("");

  const isPublished = post ? getBlogStatus(post) === "published" : false;

  // â”€â”€ Form state (seeded from existing post if editing) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  const [form, setForm] = useState<PostFormData>({
    title: post?.title ?? "",
    slug: post?.slug?.current ?? "",
    excerpt: post?.excerpt ?? "",
    authorId: post?.author?._id ?? "",
    categoryIds: post?.categories?.map((c) => c._id) ?? [],
    tags: post?.tags ?? [],
    metaTitle: post?.metaTitle ?? "",
    metaDescription: post?.metaDescription ?? "",
  });

  const [slugManual, setSlugManual] = useState(mode === "edit");

  // â”€â”€ Helpers â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  function set<K extends keyof PostFormData>(key: K, val: PostFormData[K]) {
    setForm((f) => ({ ...f, [key]: val }));
  }

  function handleTitleChange(title: string) {
    set("title", title);
    if (!slugManual) set("slug", slugify(title));
  }

  function toggleCategory(id: string) {
    set(
      "categoryIds",
      form.categoryIds.includes(id)
        ? form.categoryIds.filter((c) => c !== id)
        : [...form.categoryIds, id],
    );
  }

  function addTag() {
    const t = tagInput.trim().toLowerCase().replace(/\s+/g, "-");
    if (!t) return;
    if (form.tags.includes(t)) {
      toast.error("Tag already added");
      return;
    }
    set("tags", [...form.tags, t]);
    setTagInput("");
  }

  function removeTag(t: string) {
    set(
      "tags",
      form.tags.filter((x) => x !== t),
    );
  }

  function validate(): boolean {
    if (!form.title.trim()) {
      toast.error("Title is required");
      return false;
    }
    if (!form.slug.trim()) {
      toast.error("Slug is required");
      return false;
    }
    return true;
  }

  function handleSubmit(publish: boolean) {
    if (!validate()) return;
    setSaveType(publish ? "publish" : "draft");
    startTransition(async () => {
      try {
        await onSave(form, publish);
      } catch (e) {
        toast.error((e as Error).message ?? "Save failed");
      } finally {
        setSaveType(null);
      }
    });
  }

  const busy = isPending;

  // â”€â”€ Render â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  return (
    <div className="space-y-6 max-w-4xl">
      {/* â”€â”€ Header â”€â”€ */}
      <div className="page-header flex-wrap gap-4">
        <div className="flex items-center gap-4">
          <Link href="/dashboard/blog" className="btn-ghost p-2">
            <ArrowLeft className="w-4 h-4" />
          </Link>
          <div>
            <h1 className="page-title">
              {mode === "create" ? "New Post" : "Edit Post"}
            </h1>
            <p className="page-subtitle">
              {mode === "edit" && post
                ? isPublished
                  ? "âœ… Published Â· changes save immediately"
                  : "ğŸ“ Draft"
                : "Manage in Sanity Studio for rich text editing"}
            </p>
          </div>
        </div>

        {/* Action buttons */}
        <div className="flex items-center gap-2">
          {mode === "edit" && post && (
            <a
              href={`${process.env.NEXT_PUBLIC_SANITY_STUDIO_URL ?? ""}/desk/blogPost;${post._id}`}
              target="_blank"
              rel="noopener noreferrer"
              className="btn-secondary text-sm"
            >
              <Eye className="w-4 h-4" /> Open in Studio
            </a>
          )}

          <button
            onClick={() => handleSubmit(false)}
            disabled={busy}
            className="btn-secondary text-sm"
          >
            {busy && saveType === "draft" ? (
              <>
                <Loader2 className="w-4 h-4 animate-spin" /> Saving...
              </>
            ) : (
              <>
                <Save className="w-4 h-4" /> Save Draft
              </>
            )}
          </button>

          <button
            onClick={() => handleSubmit(true)}
            disabled={busy}
            className="btn-primary text-sm"
          >
            {busy && saveType === "publish" ? (
              <>
                <Loader2 className="w-4 h-4 animate-spin" /> Publishing...
              </>
            ) : isPublished ? (
              <>
                <EyeOff className="w-4 h-4" /> Update & Keep Published
              </>
            ) : (
              <>
                <Globe className="w-4 h-4" /> Publish
              </>
            )}
          </button>
        </div>
      </div>

      {/* â”€â”€ Two column layout â”€â”€ */}
      <div className="grid grid-cols-1 lg:grid-cols-3 gap-5">
        {/* â”€â”€ Main column â”€â”€ */}
        <div className="lg:col-span-2 space-y-5">
          {/* Title */}
          <div className="card p-5 space-y-4">
            <div>
              <label className="label">Post Title *</label>
              <input
                className="input text-base"
                placeholder="Enter a compelling title..."
                value={form.title}
                onChange={(e) => handleTitleChange(e.target.value)}
                maxLength={100}
              />
              <p
                className="text-xs mt-1 text-right"
                style={{ color: "var(--text-faint)" }}
              >
                {form.title.length}/100
              </p>
            </div>

            {/* Slug */}
            <div>
              <label className="label">
                URL Slug *
                <span
                  className="ml-2 text-xs normal-case"
                  style={{ color: "var(--text-faint)" }}
                >
                  yoursite.com/blog/
                  <strong style={{ color: "var(--gold)" }}>
                    {form.slug || "post-slug"}
                  </strong>
                </span>
              </label>
              <div className="flex gap-2">
                <div className="relative flex-1">
                  <Hash
                    className="absolute left-3 top-1/2 -translate-y-1/2 w-3.5 h-3.5"
                    style={{ color: "var(--text-faint)" }}
                  />
                  <input
                    className="input pl-8 font-mono text-sm"
                    placeholder="post-slug"
                    value={form.slug}
                    onChange={(e) => {
                      setSlugManual(true);
                      set(
                        "slug",
                        e.target.value
                          .toLowerCase()
                          .replace(/[^a-z0-9-]/g, "-")
                          .replace(/-+/g, "-"),
                      );
                    }}
                  />
                </div>
                {slugManual && (
                  <button
                    type="button"
                    className="btn-ghost text-xs whitespace-nowrap"
                    onClick={() => {
                      setSlugManual(false);
                      set("slug", slugify(form.title));
                    }}
                  >
                    Auto
                  </button>
                )}
              </div>
            </div>

            {/* Excerpt */}
            <div>
              <label className="label">
                Excerpt{" "}
                <span style={{ color: "var(--text-faint)" }}>
                  (shown in blog list)
                </span>
              </label>
              <textarea
                className="input resize-none"
                rows={3}
                placeholder="A short description that appears in the blog listing..."
                value={form.excerpt}
                onChange={(e) => set("excerpt", e.target.value)}
                maxLength={300}
              />
              <p
                className="text-xs mt-1 text-right"
                style={{ color: "var(--text-faint)" }}
              >
                {form.excerpt.length}/300
              </p>
            </div>
          </div>

          {/* Rich text notice */}
          <div
            className="rounded-xl p-4 flex items-start gap-3"
            style={{
              background: "rgba(255,215,0,0.06)",
              border: "1px solid rgba(255,215,0,0.2)",
            }}
          >
            <span className="text-xl flex-shrink-0">âœï¸</span>
            <div>
              <p
                className="text-sm font-medium"
                style={{ color: "var(--gold)" }}
              >
                Rich Text Content
              </p>
              <p
                className="text-xs mt-0.5"
                style={{ color: "var(--text-faint)" }}
              >
                Your post body uses Sanity's Portable Text editor which isn't
                embeddable here.
                {mode === "create"
                  ? ' Save the draft first, then click "Open in Studio" to write the full content.'
                  : ' Use the "Open in Studio" button above to edit the post body.'}
              </p>
            </div>
          </div>

          {/* SEO */}
          <div className="card p-5 space-y-4">
            <h3
              className="text-sm font-semibold"
              style={{
                color: "var(--text)",
                fontFamily: "Playfair Display,serif",
              }}
            >
              SEO Settings
            </h3>
            <div>
              <label className="label">
                Meta Title{" "}
                <span style={{ color: "var(--text-faint)" }}>
                  (60 chars ideal)
                </span>
              </label>
              <input
                className="input"
                placeholder="SEO title â€” defaults to post title if blank"
                value={form.metaTitle}
                onChange={(e) => set("metaTitle", e.target.value)}
                maxLength={70}
              />
              <div className="flex justify-between mt-1">
                <p
                  className="text-xs"
                  style={{
                    color:
                      form.metaTitle.length > 60
                        ? "#FFC107"
                        : "var(--text-faint)",
                  }}
                >
                  {form.metaTitle.length > 60 ? "âš  Getting long" : ""}
                </p>
                <p className="text-xs" style={{ color: "var(--text-faint)" }}>
                  {form.metaTitle.length}/70
                </p>
              </div>
            </div>
            <div>
              <label className="label">
                Meta Description{" "}
                <span style={{ color: "var(--text-faint)" }}>
                  (160 chars ideal)
                </span>
              </label>
              <textarea
                className="input resize-none"
                rows={2}
                placeholder="Description shown in Google search results..."
                value={form.metaDescription}
                onChange={(e) => set("metaDescription", e.target.value)}
                maxLength={180}
              />
              <div className="flex justify-between mt-1">
                <p
                  className="text-xs"
                  style={{
                    color:
                      form.metaDescription.length > 160
                        ? "#FFC107"
                        : "var(--text-faint)",
                  }}
                >
                  {form.metaDescription.length > 160 ? "âš  Getting long" : ""}
                </p>
                <p className="text-xs" style={{ color: "var(--text-faint)" }}>
                  {form.metaDescription.length}/180
                </p>
              </div>
            </div>
          </div>
        </div>

        {/* â”€â”€ Sidebar column â”€â”€ */}
        <div className="space-y-5">
          {/* Author */}
          <div className="card p-4 space-y-3">
            <h3
              className="text-xs font-semibold uppercase tracking-wider"
              style={{ color: "var(--text-faint)" }}
            >
              Author
            </h3>
            {loadingMeta ? (
              <div className="h-9 rounded animate-pulse bg-white/5" />
            ) : (
              <div className="relative">
                <select
                  className="input appearance-none pr-8"
                  value={form.authorId}
                  onChange={(e) => set("authorId", e.target.value)}
                  style={{ background: "rgba(255,255,255,0.04)" }}
                >
                  <option value="">No author selected</option>
                  {authors.map((a) => (
                    <option
                      key={a._id}
                      value={a._id}
                      style={{ background: "var(--surface)" }}
                    >
                      {a.name}
                    </option>
                  ))}
                </select>
                <ChevronDown
                  className="absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 pointer-events-none"
                  style={{ color: "var(--text-faint)" }}
                />
              </div>
            )}
          </div>

          {/* Categories */}
          <div className="card p-4 space-y-3">
            <h3
              className="text-xs font-semibold uppercase tracking-wider"
              style={{ color: "var(--text-faint)" }}
            >
              Categories
            </h3>
            {loadingMeta ? (
              <div className="space-y-2">
                {[1, 2, 3].map((i) => (
                  <div
                    key={i}
                    className="h-8 rounded animate-pulse bg-white/5"
                  />
                ))}
              </div>
            ) : categories.length === 0 ? (
              <p className="text-xs" style={{ color: "var(--text-faint)" }}>
                No categories yet. Add them in Sanity Studio.
              </p>
            ) : (
              <div className="space-y-1.5">
                {categories.map((cat) => {
                  const checked = form.categoryIds.includes(cat._id);
                  return (
                    <label
                      key={cat._id}
                      className="flex items-center gap-2.5 cursor-pointer group"
                    >
                      <div
                        onClick={() => toggleCategory(cat._id)}
                        className={`flex-shrink-0 w-4 h-4 rounded transition-all ${
                          checked
                            ? "bg-purple-500 border-purple-500"
                            : "border border-white/20 bg-white/5"
                        } flex items-center justify-center`}
                        style={
                          checked
                            ? {
                                background: "var(--purple)",
                                borderColor: "var(--purple)",
                              }
                            : {}
                        }
                      >
                        {checked && (
                          <span className="text-white text-xs leading-none">
                            âœ“
                          </span>
                        )}
                      </div>
                      <span
                        className="text-sm transition-colors"
                        style={{
                          color: checked ? "var(--text)" : "var(--text-muted)",
                        }}
                        onClick={() => toggleCategory(cat._id)}
                      >
                        {cat.name}
                      </span>
                    </label>
                  );
                })}
              </div>
            )}
          </div>

          {/* Tags */}
          <div className="card p-4 space-y-3">
            <h3
              className="text-xs font-semibold uppercase tracking-wider"
              style={{ color: "var(--text-faint)" }}
            >
              Tags
            </h3>

            {/* Existing tags */}
            {form.tags.length > 0 && (
              <div className="flex flex-wrap gap-1.5">
                {form.tags.map((tag) => (
                  <span
                    key={tag}
                    className="inline-flex items-center gap-1 px-2.5 py-1 rounded-full text-xs font-medium"
                    style={{
                      background: "rgba(255,215,0,0.1)",
                      color: "var(--gold)",
                      border: "1px solid rgba(255,215,0,0.25)",
                    }}
                  >
                    {tag}
                    <button
                      onClick={() => removeTag(tag)}
                      className="hover:text-white transition-colors ml-0.5"
                    >
                      <X className="w-2.5 h-2.5" />
                    </button>
                  </span>
                ))}
              </div>
            )}

            {/* Add tag */}
            <div className="flex gap-2">
              <input
                className="input text-sm flex-1"
                placeholder="Add tag..."
                value={tagInput}
                onChange={(e) => setTagInput(e.target.value)}
                onKeyDown={(e) => {
                  if (e.key === "Enter") {
                    e.preventDefault();
                    addTag();
                  }
                }}
              />
              <button
                type="button"
                onClick={addTag}
                className="btn-secondary p-2 flex-shrink-0"
              >
                <Plus className="w-4 h-4" />
              </button>
            </div>
            <p className="text-xs" style={{ color: "var(--text-faint)" }}>
              Press Enter or + to add
            </p>
          </div>

          {/* Post status summary */}
          {mode === "edit" && post && (
            <div
              className="card p-4 space-y-2 text-xs"
              style={{ color: "var(--text-faint)" }}
            >
              <h3 className="font-semibold uppercase tracking-wider">
                Post Info
              </h3>
              <div className="space-y-1.5">
                <div className="flex justify-between">
                  <span>Status</span>
                  <span
                    style={{
                      color: isPublished ? "#28A745" : "var(--text-muted)",
                    }}
                  >
                    {isPublished ? "â— Published" : "â—‹ Draft"}
                  </span>
                </div>
                {post.publishedAt && (
                  <div className="flex justify-between">
                    <span>Published</span>
                    <span style={{ color: "var(--text-muted)" }}>
                      {new Date(post.publishedAt).toLocaleDateString("en-GB", {
                        day: "numeric",
                        month: "short",
                        year: "numeric",
                      })}
                    </span>
                  </div>
                )}
                <div className="flex justify-between">
                  <span>Created</span>
                  <span style={{ color: "var(--text-muted)" }}>
                    {new Date(post._createdAt).toLocaleDateString("en-GB", {
                      day: "numeric",
                      month: "short",
                      year: "numeric",
                    })}
                  </span>
                </div>
                <div className="flex justify-between">
                  <span>Last updated</span>
                  <span style={{ color: "var(--text-muted)" }}>
                    {new Date(post._updatedAt).toLocaleDateString("en-GB", {
                      day: "numeric",
                      month: "short",
                      year: "numeric",
                    })}
                  </span>
                </div>
              </div>
            </div>
          )}
        </div>
      </div>
    </div>
  );
}


types/admin.ts
export type QuoteStatus = "draft" | "sent" | "accepted" | "rejected" | "expired";
export type BookingStatus = "pending" | "reviewing" | "confirmed" | "completed" | "rejected";
export type BlogPostStatus = "draft" | "published" | "scheduled";

export interface QuoteLineItem {
  id: string;
  description: string;
  quantity: number;
  unitPrice: number;
  total: number;
}

export interface Quote {
  id: string;
  reference: string;
  status: QuoteStatus;
  company_name: string;
  company_email: string | null;
  company_phone: string | null;
  company_address: string | null;
  company_logo_url: string | null;
  client_name: string;
  client_email: string | null;
  client_company: string | null;
  template: "classic" | "modern" | "minimal";
  quote_number: string;
  issue_date: string;
  valid_until: string | null;
  line_items: QuoteLineItem[];
  discount: number;
  tax: number;
  subtotal: number;
  discount_amount: number;
  tax_amount: number;
  total: number;
  notes: string | null;
  payment_terms: string | null;
  created_at: string;
  updated_at: string;
}

export interface AdminUser {
  id: string;
  email: string;
  full_name: string;
  role: 'admin' | 'editor' | 'author';
  avatar_url?: string;
  is_active: boolean;
  last_login?: string;
  created_at: string;
}


// â”€â”€ Booking â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

export interface Booking {
  id: string;
  reference: string;
  status: BookingStatus;

  // Client
  client_name: string;
  client_email: string;
  client_phone: string | null;
  client_company: string | null;

  // Event
  event_name: string;
  event_type: string;
  event_date: string;          // ISO date
  event_end_date: string | null;
  venue: string | null;
  attendees: number | null;

  // Services
  services: string[];          // e.g. ["Live Streaming", "Lighting"]

  // Internal
  admin_notes: string | null;
  quote_id: string | null;     // linked quote if any

  created_at: string;
  updated_at: string;
}

// â”€â”€ Blog Post â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

export interface BlogPost {
  id: string;
  title: string;
  slug: string;
  excerpt: string | null;
  content: string | null;         // markdown / plain text
  featured_image_url: string | null;
  status: BlogPostStatus;
  published_at: string | null;
  scheduled_at: string | null;
  author_name: string;
  categories: string[];
  tags: string[];
  meta_title: string | null;
  meta_description: string | null;
  created_at: string;
  updated_at: string;
}

// â”€â”€ Dashboard stats â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

export interface DashboardStats {
  total_bookings: number;
  bookings_this_month: number;
  pending_bookings: number;
  confirmed_bookings: number;
  total_quotes: number;
  accepted_quotes: number;
  total_quote_value: number;
  published_posts: number;
  unread_messages: number;
}

export interface ActivityItem {
  id: string;
  type: "booking" | "quote" | "message" | "blog";
  action: string;   // e.g. "New booking request"
  subject: string;  // e.g. "James Mwangi â€” Corporate Gala"
  status?: string;
  created_at: string;
}


// â”€â”€ Admin profile â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

export interface AdminProfile {
  id: string;
  full_name: string | null;
  email: string;
  avatar_url: string | null;
  phone: string | null;
  role: "admin" | "super_admin";
  notification_settings: NotificationSettings;
  created_at: string;
  updated_at: string;
}

export interface NotificationSettings {
  new_booking: boolean;
  booking_confirmed: boolean;
  new_message: boolean;
  email_digest: boolean;
}

// â”€â”€ Server action result â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

export interface ActionResult<T = void> {
  success: boolean;
  data?: T;
  error?: string;
}

export interface EmailTemplate {
  id: string;
  template_name: string;
  template_type: string;
  subject: string;
  body_html: string;
  body_text: string;
  variables?: string[];
  is_active: boolean;
  created_at: string;
  updated_at: string;
}

export interface MediaItem {
  id: string;
  filename: string;
  original_filename: string;
  file_url: string;
  file_type: string;
  mime_type?: string;
  file_size?: number;
  width?: number;
  height?: number;
  alt_text?: string;
  caption?: string;
  uploaded_by?: string;
  uploaded_at: string;
  folder?: string;
  tags?: string[];
}

/types/types.ts
// ============================================================
// SUPABASE â€” MERGED & EXTENDED
// ============================================================

// âœ… Combined both status unions
export type BookingStatus =
  | 'pending'
  | 'reviewing'
  | 'confirmed'
  | 'rejected'
  | 'completed'
  | 'cancelled'
  | 'rescheduled'

// Added from second file
export type PaymentStatus =
  | 'unpaid'
  | 'deposit_paid'
  | 'fully_paid'

export type QuoteStatus = 'new' | 'contacted' | 'converted' | 'closed'
export type PreferredContact = 'email' | 'phone' | 'whatsapp'

// ------------------------------------------------------------
// Activity + Reschedule
// ------------------------------------------------------------

export interface RescheduleRecord {
  from_date: string
  to_date: string
  reason: string
  rescheduled_at: string
  rescheduled_by: string
}

export interface ActivityLogEntry {
  action: string
  performed_by: string
  performed_at: string
  details?: string
}

// ------------------------------------------------------------
// Booking (merged version)
// ------------------------------------------------------------

export interface Booking {
  id: string
  booking_reference: string

  // Contact
  full_name: string
  email: string
  phone: string
  company: string | null

  // Event
  event_name: string
  event_type: string
  event_date: string
  event_start_time: string
  event_end_time: string | null
  expected_attendees: number
  venue_name: string
  venue_address: string | null

  // Services
  selected_services: string[]

  // Additional
  special_requirements: string | null
  budget_range: string | null
  how_heard: string | null
  preferred_contact: string

  // Pricing (NEW)
  price_total?: number
  price_deposit?: number
  payment_status?: PaymentStatus

  // Files (NEW)
  uploaded_files?: string[]

  // Rescheduling (NEW)
  reschedule_reason?: string
  reschedule_history?: RescheduleRecord[]

  // Activity log (NEW)
  activity_log?: ActivityLogEntry[]

  // Admin
  status: BookingStatus
  internal_notes: string | null
  assigned_to: string | null

  // Timestamps
  created_at: string
  updated_at: string
}

// ------------------------------------------------------------
// Newsletter (NEW)
// ------------------------------------------------------------

export interface Newsletter {
  id: string
  email: string
  subscribed_at: string
  status: 'active' | 'unsubscribed'
}

// ------------------------------------------------------------
// Quote Request (unchanged)
// ------------------------------------------------------------

export interface QuoteRequest {
  id: string
  reference: string
  name: string
  email: string
  phone: string
  service?: string
  event_date?: string
  message?: string
  status: QuoteStatus
  created_at: string
}

// ------------------------------------------------------------
// Admin Profile (merged)
// ------------------------------------------------------------

export interface AdminProfile {
  id: string
  email: string
  full_name: string
  avatar_url?: string
  role: 'admin' | 'super_admin'
  notification_settings?: {
    new_booking: boolean
    booking_cancelled: boolean
    email_digest: boolean
  }
  created_at: string
}

// ============================================================
// SANITY â€” MERGED SAFELY
// ============================================================

export interface SanityImage {
  _type: 'image'
  asset: { _ref: string; _type: 'reference' }
  hotspot?: { x: number; y: number; height: number; width: number }
  crop?: { top: number; bottom: number; left: number; right: number }
  alt?: string
}

export interface SanitySlug {
  current: string
  _type?: 'slug'
}

export interface SanityAuthor {
  _id: string
  name: string
  slug: SanitySlug
  image?: SanityImage
  bio?: unknown[] | string
}

// Keeping your original schema shape
export interface SanityCategory {
  _id: string
  name?: string
  title?: string
  slug: SanitySlug
  description?: string
  color?: string
}

export interface SanityTag {
  _id: string
  title: string
  slug: SanitySlug
}

// ------------------------------------------------------------
// BlogPost (merged WITHOUT breaking yours)
// ------------------------------------------------------------

export type BlogPostStatus = 'draft' | 'published' | 'scheduled' | 'archived'

export interface BlogPost {
  _id: string
  _createdAt: string
  _updatedAt: string

  title: string
  slug: SanitySlug
  excerpt?: string

  // Support BOTH versions safely
  content?: unknown[]      // your schema
  body?: unknown[]         // second schema

  mainImage?: SanityImage
  featuredImage?: SanityImage

  author?: SanityAuthor
  categories?: SanityCategory[]
  tags?: string[] | SanityTag[]

  // Publishing
  publishedAt?: string
  scheduledAt?: string
  status?: BlogPostStatus

  // SEO (support both formats)
  metaTitle?: string
  metaDescription?: string
  ogImage?: SanityImage

  seo?: {
    metaTitle?: string
    metaDescription?: string
    focusKeyword?: string
  }

  views?: number
}

// Derived helper (improved to handle scheduled)

export function getBlogStatus(post: BlogPost): BlogPostStatus {
  if (post.status) return post.status
  if (post.scheduledAt) return 'scheduled'
  return post.publishedAt ? 'published' : 'draft'
}

// ============================================================
// QUOTE GENERATOR (unchanged)
// ============================================================

export type QuoteTemplate = 'classic' | 'modern' | 'minimal'

export interface QuoteLineItem {
  id: string
  description: string
  quantity: number
  unitPrice: number
}

export interface QuoteData {
  template: QuoteTemplate
  logoDataUrl?: string
  companyName: string
  companyEmail: string
  companyPhone: string
  companyAddress?: string
  clientName: string
  clientEmail: string
  clientCompany?: string
  quoteNumber: string
  quoteDate: string
  validUntil?: string
  lineItems: QuoteLineItem[]
  taxRate: number
  discount?: number
  notes?: string
  paymentTerms?: string
}

export function computeQuoteTotals(
  items: QuoteLineItem[],
  taxRate: number,
  discount = 0
) {
  const subtotal = items.reduce((sum, i) => sum + i.quantity * i.unitPrice, 0)
  const discountAmount = discount
  const taxable = Math.max(0, subtotal - discountAmount)
  const tax = (taxable * taxRate) / 100
  const total = taxable + tax
  return { subtotal, discountAmount, taxable, tax, total }
}

// ============================================================
// UI TYPES (extended)
// ============================================================

export interface TableColumn<T = unknown> {
  key: string
  label: string
  sortable?: boolean
  render?: (value: unknown, row: T) => React.ReactNode
}

export interface PaginationState {
  page: number
  pageSize: number
  total: number
}

export interface FilterState {
  search: string
  status?: BookingStatus | 'all'
  dateFrom?: string
  dateTo?: string
  serviceType?: string
}

export interface ToastMessage {
  id: string
  type: 'success' | 'error' | 'warning' | 'info'
  title: string
  description?: string
}

export interface ConfirmDialogProps {
  open: boolean
  title: string
  description: string
  confirmLabel?: string
  cancelLabel?: string
  variant?: 'default' | 'destructive'
  onConfirm: () => void
  onCancel: () => void
}

// ============================================================
// EMAIL TYPES (NEW)
// ============================================================

export interface EmailTemplate {
  to: strings
  subject: string
  html: string
  text?: string
}

export type EmailEvent =
  | 'booking_created'
  | 'booking_confirmed'
  | 'booking_rescheduled'
  | 'booking_cancelled'
  | 'booking_completed'

export interface EmailPayload {
  event: EmailEvent
  booking: Booking
  adminEmail?: string
}

// ============================================================
// Blog Edit Page
// ============================================================
export type PostFormData = {
  title: string
  slug: string
  excerpt: string
  authorId: string
  categoryIds: string[]
  tags: string[]
  metaTitle: string
  metaDescription: string
}

export function slugify(str: string) {
  return str
    .toLowerCase()
    .trim()
    .replace(/[^\w\s-]/g, '')
    .replace(/[\s_-]+/g, '-')
    .replace(/^-+|-+$/g, '')
}

//globals.css
@import url('https://fonts.googleapis.com/css2?family=Playfair+Display:wght@500;600;700&family=DM+Sans:wght@300;400;500;600&display=swap');
@import "tailwindcss";
@import "tw-animate-css";

@custom-variant dark (&:is(.dark *));

@theme inline {
    --color-background: var(--background);
    --color-foreground: var(--foreground);
    --font-sans: var(--font-geist-sans);
    --font-mono: var(--font-geist-mono);
    --color-sidebar-ring: var(--sidebar-ring);
    --color-sidebar-border: var(--sidebar-border);
    --color-sidebar-accent-foreground: var(--sidebar-accent-foreground);
    --color-sidebar-accent: var(--sidebar-accent);
    --color-sidebar-primary-foreground: var(--sidebar-primary-foreground);
    --color-sidebar-primary: var(--sidebar-primary);
    --color-sidebar-foreground: var(--sidebar-foreground);
    --color-sidebar: var(--sidebar);
    --color-chart-5: var(--chart-5);
    --color-chart-4: var(--chart-4);
    --color-chart-3: var(--chart-3);
    --color-chart-2: var(--chart-2);
    --color-chart-1: var(--chart-1);
    --color-ring: var(--ring);
    --color-input: var(--input);
    --color-border: var(--border);
    --color-destructive: var(--destructive);
    --color-accent-foreground: var(--accent-foreground);
    --color-accent: var(--accent);
    --color-muted-foreground: var(--muted-foreground);
    --color-muted: var(--muted);
    --color-secondary-foreground: var(--secondary-foreground);
    --color-secondary: var(--secondary);
    --color-primary-foreground: var(--primary-foreground);
    --color-primary: var(--primary);
    --color-popover-foreground: var(--popover-foreground);
    --color-popover: var(--popover);
    --color-card-foreground: var(--card-foreground);
    --color-card: var(--card);
    --radius-sm: calc(var(--radius) - 4px);
    --radius-md: calc(var(--radius) - 2px);
    --radius-lg: var(--radius);
    --radius-xl: calc(var(--radius) + 4px);
    --radius-2xl: calc(var(--radius) + 8px);
    --radius-3xl: calc(var(--radius) + 12px);
    --radius-4xl: calc(var(--radius) + 16px);
}

:root {
    --radius: 0.75rem;

    /* Primary Purple - OKLCH */
    --primary: oklch(0.49 0.18 302);
    --primary-foreground: oklch(1 0 0);
    --primary-dark: oklch(0.35 0.2 295);
    --primary-light: oklch(0.6 0.18 310);

    /* Gold/Yellow Accent - OKLCH */
    --accent: oklch(0.88 0.17 85);
    --accent-foreground: oklch(0.25 0.15 295);
    --accent-light: oklch(0.91 0.16 90);
    --accent-dark: oklch(0.82 0.18 80);

    /* Dark Purple/Navy Background - OKLCH */
    --background: oklch(0.2 0.08 285);
    --foreground: oklch(1 0 0);

    /* Cards with glassmorphism - OKLCH */
    --card: oklch(0.25 0.07 285);
    --card-foreground: oklch(1 0 0);
    --popover: oklch(0.25 0.07 285);
    --popover-foreground: oklch(1 0 0);

    /* Secondary - OKLCH */
    --secondary: oklch(0.32 0.06 285);
    --secondary-foreground: oklch(1 0 0);

    /* Muted - OKLCH */
    --muted: oklch(0.38 0.05 285);
    --muted-foreground: oklch(0.75 0.03 285);

    /* Semantic Colors - OKLCH */
    --success: oklch(0.62 0.17 145);
    --warning: oklch(0.85 0.15 85);
    --destructive: oklch(0.63 0.26 29);
    --destructive-foreground: oklch(1 0 0);
    --info: oklch(0.65 0.15 220);

    /* Borders - OKLCH */
    --border: oklch(0.42 0.05 285);
    --border-hover: oklch(0.5 0.08 285);
    --input: oklch(0.38 0.05 285);

    /* Ring - Gold */
    --ring: oklch(0.88 0.17 85);

    /* Chart colors */
    --chart-1: oklch(0.49 0.18 302);
    --chart-2: oklch(0.88 0.17 85);
    --chart-3: oklch(0.7 0.15 315);
    --chart-4: oklch(0.55 0.18 295);
    --chart-5: oklch(0.45 0.2 310);

    /* Sidebar */
    --sidebar: oklch(0.2 0.08 285);
    --sidebar-foreground: oklch(1 0 0);
    --sidebar-primary: oklch(0.88 0.17 85);
    --sidebar-primary-foreground: oklch(0.25 0.15 295);
    --sidebar-accent: oklch(0.32 0.06 285);
    --sidebar-accent-foreground: oklch(1 0 0);
    --sidebar-border: oklch(0.42 0.05 285);
    --sidebar-ring: oklch(0.88 0.17 85);

    /* Additional semantic colors */
    --text: oklch(0.95 0.01 285);
    --text-muted: oklch(0.72 0.04 285);
    --text-faint: oklch(0.55 0.05 285);
    --surface: oklch(0.25 0.07 285);
    --surface-2: oklch(0.28 0.07 285);
}

.dark {
    /* Dark mode adjustments */
    --background: oklch(0.15 0.09 285);
    --foreground: oklch(0.98 0 0);
    --card: oklch(0.22 0.08 285);
    --card-foreground: oklch(0.98 0 0);
    --popover: oklch(0.22 0.08 285);
    --popover-foreground: oklch(0.98 0 0);
    --primary: oklch(0.55 0.18 302);
    --primary-foreground: oklch(1 0 0);
    --secondary: oklch(0.28 0.07 285);
    --secondary-foreground: oklch(0.98 0 0);
    --muted: oklch(0.28 0.07 285);
    --muted-foreground: oklch(0.7 0.04 285);
    --accent: oklch(0.88 0.17 85);
    --accent-foreground: oklch(0.2 0.1 295);
    --destructive: oklch(0.63 0.26 29);
    --border: oklch(0.35 0.05 285);
    --input: oklch(0.3 0.06 285);
    --ring: oklch(0.88 0.17 85);
    --chart-1: oklch(0.55 0.18 302);
    --chart-2: oklch(0.88 0.17 85);
    --chart-3: oklch(0.75 0.15 315);
    --chart-4: oklch(0.6 0.18 295);
    --chart-5: oklch(0.5 0.2 310);
    --sidebar: oklch(0.22 0.08 285);
    --sidebar-foreground: oklch(0.98 0 0);
    --sidebar-primary: oklch(0.88 0.17 85);
    --sidebar-primary-foreground: oklch(0.2 0.1 295);
    --sidebar-accent: oklch(0.28 0.07 285);
    --sidebar-accent-foreground: oklch(0.98 0 0);
    --sidebar-border: oklch(0.35 0.05 285);
    --sidebar-ring: oklch(0.88 0.17 85);
}

@layer base {
    * {
        @apply border-border outline-ring/50;
        scrollbar-width: thin;
        scrollbar-color: var(--primary-dark) transparent;
    }

    html {
        scroll-behavior: smooth;
    }

    body {
        @apply bg-background text-foreground antialiased;
        font-family: 'DM Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
        font-size: 15px;
        line-height: 1.6;
        -webkit-font-smoothing: antialiased;
    }

    h1,
    h2,
    h3,
    h4,
    h5,
    h6 {
        font-family: 'Playfair Display', serif;
        font-weight: 600;
        line-height: 1.3;
    }

    ::selection {
        background: oklch(0.49 0.18 302 / 0.35);
        color: var(--accent);
    }

    /* Scrollbar styles */
    ::-webkit-scrollbar {
        width: 5px;
        height: 5px;
    }

    ::-webkit-scrollbar-track {
        background: transparent;
    }

    ::-webkit-scrollbar-thumb {
        background: var(--primary-dark);
        border-radius: 99px;
    }

    ::-webkit-scrollbar-thumb:hover {
        background: var(--primary);
    }
}

/* Root layout */
#root {
    max-width: 1280px;
    margin: 0 auto;
    padding: 2rem;
    text-align: center;
}

/* Logo styles */
.logo {
    height: 6em;
    padding: 1.5em;
    will-change: filter;
    transition: filter 300ms;
}

.logo:hover {
    filter: drop-shadow(0 0 2em oklch(0.88 0.17 85 / 0.7));
}

.logo.react:hover {
    filter: drop-shadow(0 0 2em oklch(0.7 0.15 200 / 0.7));
}

@keyframes logo-spin {
    from {
        transform: rotate(0deg);
    }

    to {
        transform: rotate(360deg);
    }
}

@media (prefers-reduced-motion: no-preference) {
    a:nth-of-type(2) .logo {
        animation: logo-spin infinite 20s linear;
    }
}

.card {
    padding: 2em;
}

.read-the-docs {
    color: oklch(0.6 0.02 285);
}

@layer components {

    /* â”€â”€â”€ Sidebar â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .sidebar {
        @apply fixed left-0 top-0 h-full z-40 flex flex-col;
        width: 256px;
        background: var(--surface);
        border-right: 1px solid var(--border);
        transition: width 0.25s ease;
    }

    .sidebar.collapsed {
        width: 68px;
    }

    .sidebar-link {
        @apply flex items-center gap-3 px-4 py-2.5 rounded-lg transition-all duration-150 text-sm font-medium;
        color: var(--text-muted);
        margin: 2px 8px;
    }

    .sidebar-link:hover {
        background: oklch(0.49 0.18 302 / 0.12);
        color: var(--text);
    }

    .sidebar-link.active {
        background: oklch(0.49 0.18 302 / 0.22);
        color: var(--accent);
        box-shadow: inset 3px 0 0 var(--accent);
    }

    /* â”€â”€â”€ Cards â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .card {
        @apply rounded-xl;
        background: var(--surface);
        border: 1px solid var(--border);
    }

    .card-hover:hover {
        border-color: var(--border-hover);
        box-shadow: 0 0 0 1px oklch(0.49 0.18 302 / 0.2), 0 8px 24px oklch(0 0 0 / 0.4);
        transform: translateY(-1px);
        transition: all 0.15s ease;
    }

    /* â”€â”€â”€ Glass Cards â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .glass-card {
        background: oklch(0.25 0.07 285 / 0.4);
        backdrop-filter: blur(40px);
        border: 1px solid oklch(1 0 0 / 0.1);
        box-shadow: 0 10px 40px oklch(0.15 0.09 285 / 0.5);
    }

    .glass-nav {
        background: oklch(0.2 0.08 285 / 0.8);
        backdrop-filter: blur(20px);
        border-bottom: 1px solid oklch(1 0 0 / 0.1);
    }

    /* â”€â”€â”€ Buttons â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .btn-primary {
        @apply inline-flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-semibold transition-all duration-150;
        background: linear-gradient(135deg, var(--accent), var(--accent-dark));
        color: var(--accent-foreground);
    }

    .btn-primary:hover {
        filter: brightness(1.08);
        transform: translateY(-1px);
        box-shadow: 0 4px 16px oklch(0.88 0.17 85 / 0.3);
    }

    .btn-secondary {
        @apply inline-flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium transition-all duration-150;
        background: oklch(0.49 0.18 302 / 0.15);
        color: var(--text);
        border: 1px solid oklch(0.49 0.18 302 / 0.3);
    }

    .btn-secondary:hover {
        background: oklch(0.49 0.18 302 / 0.25);
        border-color: oklch(0.49 0.18 302 / 0.5);
    }

    .btn-ghost {
        @apply inline-flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium transition-all duration-150;
        color: var(--text-muted);
    }

    .btn-ghost:hover {
        background: oklch(1 0 0 / 0.05);
        color: var(--text);
    }

    .btn-danger {
        @apply inline-flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-semibold transition-all duration-150;
        background: oklch(0.63 0.26 29 / 0.12);
        color: var(--destructive);
        border: 1px solid oklch(0.63 0.26 29 / 0.3);
    }

    .btn-danger:hover {
        background: oklch(0.63 0.26 29 / 0.2);
        border-color: oklch(0.63 0.26 29 / 0.5);
    }

    /* â”€â”€â”€ Form Elements â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .input {
        @apply w-full rounded-lg px-3 py-2.5 text-sm transition-all duration-150 outline-none;
        background: oklch(1 0 0 / 0.04);
        border: 1px solid var(--border);
        color: var(--text);
    }

    .input::placeholder {
        color: var(--text-faint);
    }

    .input:focus {
        border-color: var(--accent);
        box-shadow: 0 0 0 3px oklch(0.88 0.17 85 / 0.1);
    }

    .label {
        @apply block text-sm font-medium mb-1.5;
        color: var(--text-muted);
    }

    /* â”€â”€â”€ Status Badges â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .badge {
        @apply inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-semibold uppercase tracking-wide;
    }

    .badge-pending {
        background: oklch(0.85 0.15 85 / 0.15);
        color: var(--warning);
        border: 1px solid oklch(0.85 0.15 85 / 0.3);
    }

    .badge-confirmed {
        background: oklch(0.65 0.15 220 / 0.15);
        color: var(--info);
        border: 1px solid oklch(0.65 0.15 220 / 0.3);
    }

    .badge-completed {
        background: oklch(0.62 0.17 145 / 0.15);
        color: var(--success);
        border: 1px solid oklch(0.62 0.17 145 / 0.3);
    }

    .badge-cancelled {
        background: oklch(0.63 0.26 29 / 0.15);
        color: var(--destructive);
        border: 1px solid oklch(0.63 0.26 29 / 0.3);
    }

    .badge-rescheduled {
        background: oklch(0.49 0.18 302 / 0.15);
        color: oklch(0.75 0.15 315);
        border: 1px solid oklch(0.49 0.18 302 / 0.3);
    }

    .badge-draft {
        background: oklch(0.6 0.02 285 / 0.15);
        color: oklch(0.6 0.02 285);
        border: 1px solid oklch(0.6 0.02 285 / 0.3);
    }

    .badge-published {
        background: oklch(0.62 0.17 145 / 0.15);
        color: var(--success);
        border: 1px solid oklch(0.62 0.17 145 / 0.3);
    }

    .badge-scheduled {
        background: oklch(0.85 0.15 85 / 0.15);
        color: var(--warning);
        border: 1px solid oklch(0.85 0.15 85 / 0.3);
    }

    /* â”€â”€â”€ Table â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .data-table {
        @apply w-full text-sm;
        border-collapse: collapse;
    }

    .data-table th {
        @apply px-4 py-3 text-left font-medium text-xs uppercase tracking-wider;
        color: var(--text-faint);
        border-bottom: 1px solid var(--border);
    }

    .data-table td {
        @apply px-4 py-3.5;
        color: var(--text-muted);
        border-bottom: 1px solid oklch(1 0 0 / 0.04);
    }

    .data-table tr:hover td {
        background: oklch(0.49 0.18 302 / 0.05);
        color: var(--text);
    }

    /* â”€â”€â”€ Gradients â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .gradient-primary {
        background: linear-gradient(135deg, oklch(0.49 0.18 302), oklch(0.45 0.2 315));
    }

    .gradient-hero {
        background: linear-gradient(180deg, oklch(0.35 0.2 295), oklch(0.49 0.18 302), oklch(0.5 0.18 320));
    }

    .gradient-card {
        background: linear-gradient(145deg, oklch(0.28 0.07 285 / 0.8), oklch(0.25 0.07 285 / 0.6));
    }

    .gradient-accent {
        background: linear-gradient(135deg, oklch(0.88 0.17 85), oklch(0.85 0.18 75));
    }

    .text-gradient-gold {
        background: linear-gradient(135deg, oklch(0.88 0.17 85), oklch(0.85 0.18 75));
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
    }

    .text-gold-gradient {
        background: linear-gradient(135deg, var(--accent), var(--accent-light));
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
    }

    .bg-purple-gradient {
        background: linear-gradient(135deg, var(--primary-dark) 0%, var(--primary) 50%, var(--primary-light) 100%);
    }

    /* â”€â”€â”€ Effects â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .glow-gold {
        box-shadow: 0 0 30px oklch(0.88 0.17 85 / 0.3);
    }

    .glow-purple {
        box-shadow: 0 0 40px oklch(0.49 0.18 302 / 0.4);
    }

    .geometric-frame {
        @apply relative;
    }

    .geometric-frame::before {
        content: "";
        @apply absolute -inset-4 border-2 rounded-lg;
        border-color: oklch(0.88 0.17 85);
        transform: translate(-8px, -8px);
    }

    .dot-pattern {
        background-image: radial-gradient(circle, oklch(0.88 0.17 85) 1px, transparent 1px);
        background-size: 20px 20px;
    }

    .floating-cloud {
        @apply absolute opacity-30;
        filter: blur(40px);
        background: linear-gradient(180deg, oklch(1 0 0 / 0.3), transparent);
    }

    /* â”€â”€â”€ Stat Cards â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .stat-card {
        @apply rounded-xl p-5 relative overflow-hidden;
        background: var(--surface);
        border: 1px solid var(--border);
        transition: all 0.2s ease;
    }

    .stat-card::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 2px;
        background: linear-gradient(90deg, var(--primary), var(--accent));
        opacity: 0;
        transition: opacity 0.2s;
    }

    .stat-card:hover::before {
        opacity: 1;
    }

    /* â”€â”€â”€ Page Header â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .page-header {
        @apply flex items-start justify-between mb-6;
    }

    .page-title {
        @apply text-2xl;
        font-family: 'Playfair Display', serif;
        background: linear-gradient(135deg, var(--accent), var(--accent-light));
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
    }

    .page-subtitle {
        @apply text-sm mt-1;
        color: var(--text-faint);
    }
}

@layer utilities {
    .animate-float {
        animation: float 6s ease-in-out infinite;
    }

    .animate-float-delayed {
        animation: float 6s ease-in-out infinite 2s;
    }

    .animate-glow-pulse {
        animation: glow-pulse 3s ease-in-out infinite;
    }

    .animate-slide-up {
        animation: slide-up 0.6s ease-out forwards;
    }

    .animate-fade-in {
        animation: fade-in 0.8s ease-out forwards;
    }

    .animate-scale-in {
        animation: scale-in 0.5s ease-out forwards;
    }
}

@keyframes float {

    0%,
    100% {
        transform: translateY(0px);
    }

    50% {
        transform: translateY(-20px);
    }
}

@keyframes glow-pulse {

    0%,
    100% {
        opacity: 0.5;
        filter: blur(40px);
    }

    50% {
        opacity: 0.8;
        filter: blur(60px);
    }
}

@keyframes slide-up {
    from {
        opacity: 0;
        transform: translateY(40px);
    }

    to {
        opacity: 1;
        transform: translateY(0);
    }
}

@keyframes fade-in {
    from {
        opacity: 0;
    }

    to {
        opacity: 1;
    }
}

@keyframes scale-in {
    from {
        opacity: 0;
        transform: scale(0.9);
    }

    to {
        opacity: 1;
        transform: scale(1);
    }
}
